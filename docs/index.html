<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<meta name='viewport' content='width=device-width,initial-scale=1'>
<style>*{box-sizing:border-box}body{font-family:system-ui,sans-serif;margin:0}</style>
<meta name='generator' content='mdx-deck'>

</head>
<body>
<div id=root><div><div class="sc-brqgnP bYQSVy" mode="NORMAL" step="-1" width="100vw" height="100vh" color="text"><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed" rel="stylesheet"/><link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet"/><div class="sc-cvbbAY hWGxQE"><div class="sc-jWBwVP gVDzLb"><div class="Slide sc-bwzfXH jcCqmo" id="slide-0"><div><h1 class="sc-EHOje jvzENE sc-ifAKCX fQplfI" font-size="4" color="heading">Making Better PRs through Automation</h1><h2 class="sc-gzVnrw ibZhkv sc-bZQynM leehIF" font-size="3" color="heading">a.k.a. how to stop saying &quot;Get off my lawn!&quot;</h2></div></div><div class="Slide sc-bwzfXH jcCqmo" id="slide-1"><div><h1 class="sc-EHOje jvzENE sc-ifAKCX fQplfI" font-size="4" color="heading">About Me</h1><p class="sc-cSHVUG bHfcLB" font-size="2">Some stuff about me.</p><div class="sc-bdVaJa bPcDKt" src="img/Family.jpg" width="100vw" height="100vh"></div></div></div><div class="Slide sc-bwzfXH jcCqmo" id="slide-2"><div><h1 class="sc-EHOje jvzENE sc-ifAKCX fQplfI" font-size="4" color="heading">What I do</h1><div style="position:relative;height:70vh;width:100vw"><div class="sc-bdVaJa ePfYiz" src="img/RedactionStudio.png" width="100vw" height="100vh" style="visibility:hidden"></div><div class="sc-bdVaJa kXlLkX" src="img/Red_X.svg" width="100vw" height="100vh" style="visibility:hidden"></div></div></div></div><div class="Slide sc-bwzfXH jcCqmo" id="slide-3"><div><h1 class="sc-EHOje jvzENE sc-ifAKCX fQplfI" font-size="4" color="heading">Imagine this...</h1><img src="img/where_are_the_tests.png" style="visibility:hidden"/><img src="img/worst_review.png" style="visibility:hidden"/></div></div><div class="Slide sc-bwzfXH jcCqmo" id="slide-4"><div><div class="sc-bdVaJa llsnq" src="img/old_man.png" width="100vw" height="100vh"></div></div></div><div class="Slide sc-bwzfXH jcCqmo" id="slide-5"><div><h1 class="sc-EHOje jvzENE sc-ifAKCX fQplfI" font-size="4" color="heading">Enter DangerJS!</h1><blockquote class="sc-kGXeez igNwo" font-size="2" color="quote"><p class="sc-cSHVUG bHfcLB" font-size="2">Danger runs during your CI process, and gives teams the chance to automate common code review chores.</p></blockquote><p class="sc-cSHVUG bHfcLB" font-size="2">In other words, you can make the robot the bad guy!</p></div></div><div class="Slide sc-bwzfXH jcCqmo" id="slide-6"><div><h1 class="sc-EHOje jvzENE sc-ifAKCX fQplfI" font-size="4" color="heading">Before entering the Danger Zone...</h1><p class="sc-cSHVUG bHfcLB" font-size="2">Create Team Standards + Rules.</p></div></div><div class="Slide sc-bwzfXH jcCqmo" id="slide-7"><div><h1 class="sc-EHOje jvzENE sc-ifAKCX fQplfI" font-size="4" color="heading">Setting up Danger</h1></div></div><div class="Slide sc-bwzfXH jcCqmo" id="slide-8"><div><h1 class="sc-EHOje jvzENE sc-ifAKCX fQplfI" font-size="4" color="heading">Getting set up</h1><ol class="sc-chPdSV czSfaU" font-size="2"><li class="sc-kgoBCf kVSTZj">Install Danger in your project</li><li class="sc-kgoBCf kVSTZj">Create a bot account for Danger to post to your Code Review (currently only support for GitHub)</li><li class="sc-kgoBCf kVSTZj">Tell your CI how to pass the access token / GitHub URL / current Pull Request number to Danger</li><li class="sc-kgoBCf kVSTZj">Create a Dangerfile</li><li class="sc-kgoBCf kVSTZj">Run it!</li></ol></div></div><div class="Slide sc-bwzfXH jcCqmo" id="slide-9"><div><h1 class="sc-EHOje jvzENE sc-ifAKCX fQplfI" font-size="4" color="heading">New Rule: No Missing Tests</h1><p class="sc-cSHVUG bHfcLB" font-size="2">The Rule: Every new file our team creates should have a minimum test coverage of N%.</p></div></div><div class="Slide sc-bwzfXH jcCqmo" id="slide-10"><div><h1 class="sc-EHOje jvzENE sc-ifAKCX fQplfI" font-size="4" color="heading">Set-up</h1><p class="sc-cSHVUG bHfcLB" font-size="2">First, configure your test runner to output a JSON Coverage report:</p><pre style="color:#ccc;background:#2d2d2d;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:#ccc;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">jest --coverage --json --outputFile=&quot;./coverage-report.json&quot;
</code></pre></div></div><div class="Slide sc-bwzfXH jcCqmo" id="slide-11"><div><h1 class="sc-EHOje jvzENE sc-ifAKCX fQplfI" font-size="4" color="heading">Danger Globals</h1><p class="sc-cSHVUG bHfcLB" font-size="2">Tools provided by Danger for working with modified/added files:</p><ul class="sc-kAzzGY kKaDaD" font-size="2"><li class="sc-kgoBCf kVSTZj"><code class="sc-dxgOiQ cvMJLE" color="code">danger.git.created_files</code> - New Files</li><li class="sc-kgoBCf kVSTZj"><code class="sc-dxgOiQ cvMJLE" color="code">danger.git.deleted_files</code> - Files that were removed</li><li class="sc-kgoBCf kVSTZj"><code class="sc-dxgOiQ cvMJLE" color="code">danger.git.modified_files</code> - Files that were changed.</li></ul></div></div><div class="Slide sc-bwzfXH jcCqmo" id="slide-12"><div class="sc-gipzik bgTkeX"><div><pre style="color:#ccc;background:#2d2d2d;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:#ccc;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#cc99cd">const</span> <span class="token" style="color:#f8c555">MINIMUM_TEST_COVERAGE</span> <span class="token" style="color:#67cdcc">=</span> <span class="token" style="color:#f08d49">0.5</span>

<span class="token" style="color:#cc99cd">const</span> jsFileTest <span class="token" style="color:#67cdcc">=</span> <span class="token" style="color:#7ec699">/.js$/</span>
<span class="token" style="color:#cc99cd">const</span> testFileTest <span class="token" style="color:#67cdcc">=</span> <span class="token" style="color:#7ec699">/.test.js$/</span>
<span class="token" style="color:#cc99cd">const</span> storiesFileTest <span class="token" style="color:#67cdcc">=</span> <span class="token" style="color:#7ec699">/.stories.js$/</span>

<span class="token" style="color:#cc99cd">const</span> filesNeedingTests <span class="token" style="color:#67cdcc">=</span> danger<span class="token" style="color:#ccc">.</span>git<span class="token" style="color:#ccc">.</span>created_files
  <span class="token" style="color:#ccc">.</span><span class="token" style="color:#f08d49">filter</span><span class="token" style="color:#ccc">(</span>f <span class="token" style="color:#67cdcc">=&gt;</span> <span class="token" style="color:#f08d49">isJsFile</span><span class="token" style="color:#ccc">(</span>f<span class="token" style="color:#ccc">)</span> <span class="token" style="color:#67cdcc">&amp;&amp;</span> <span class="token" style="color:#67cdcc">!</span><span class="token" style="color:#f08d49">isTestFile</span><span class="token" style="color:#ccc">(</span>f<span class="token" style="color:#ccc">)</span> <span class="token" style="color:#67cdcc">&amp;&amp;</span> <span class="token" style="color:#67cdcc">!</span><span class="token" style="color:#f08d49">isStorybookFile</span><span class="token" style="color:#ccc">(</span>f<span class="token" style="color:#ccc">)</span> <span class="token" style="color:#67cdcc">&amp;&amp;</span> <span class="token" style="color:#67cdcc">!</span>whiteListedFiles<span class="token" style="color:#ccc">.</span><span class="token" style="color:#f08d49">includes</span><span class="token" style="color:#ccc">(</span>f<span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">)</span>
  <span class="token" style="color:#ccc">.</span><span class="token" style="color:#f08d49">filter</span><span class="token" style="color:#ccc">(</span>f <span class="token" style="color:#67cdcc">=&gt;</span> <span class="token" style="color:#ccc">{</span>
      <span class="token" style="color:#999">// The path in the test report is an absolute path.</span>
      <span class="token" style="color:#cc99cd">const</span> absPath <span class="token" style="color:#67cdcc">=</span> path<span class="token" style="color:#ccc">.</span><span class="token" style="color:#f08d49">resolve</span><span class="token" style="color:#ccc">(</span>f<span class="token" style="color:#ccc">)</span>
      <span class="token" style="color:#cc99cd">const</span> report <span class="token" style="color:#67cdcc">=</span> testReport<span class="token" style="color:#ccc">[</span>absPath<span class="token" style="color:#ccc">]</span>

      <span class="token" style="color:#999">// If there&#x27;s no report, this file isn&#x27;t part of a coverage, so should not be included.</span>
      <span class="token" style="color:#cc99cd">if</span> <span class="token" style="color:#ccc">(</span><span class="token" style="color:#67cdcc">!</span>report<span class="token" style="color:#ccc">)</span> <span class="token" style="color:#ccc">{</span>
        <span class="token" style="color:#cc99cd">return</span> <span class="token" style="color:#f08d49">false</span>
      <span class="token" style="color:#ccc">}</span>

      <span class="token" style="color:#cc99cd">const</span> <span class="token" style="color:#ccc">{</span> statements<span class="token" style="color:#ccc">:</span> <span class="token" style="color:#ccc">{</span> pct <span class="token" style="color:#ccc">}</span> <span class="token" style="color:#ccc">}</span> <span class="token" style="color:#67cdcc">=</span> report
      <span class="token" style="color:#cc99cd">return</span> pct <span class="token" style="color:#67cdcc">&lt;</span> <span class="token" style="color:#f8c555">MINIMUM_TEST_COVERAGE</span>
    <span class="token" style="color:#ccc">}</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">)</span>
</code></pre></div></div></div><div class="Slide sc-bwzfXH jcCqmo" id="slide-13"><div><h1 class="sc-EHOje jvzENE sc-ifAKCX fQplfI" font-size="4" color="heading">Reporting to the PR</h1><p class="sc-cSHVUG bHfcLB" font-size="2">Danger provides utilities for how it will post to the Pull Request:</p><ul class="sc-kAzzGY kKaDaD" font-size="2"><li class="sc-kgoBCf kVSTZj"><code class="sc-dxgOiQ cvMJLE" color="code">danger.info</code> - Tidbits</li><li class="sc-kgoBCf kVSTZj"><code class="sc-dxgOiQ cvMJLE" color="code">danger.warn</code> - Draw attention</li><li class="sc-kgoBCf kVSTZj"><code class="sc-dxgOiQ cvMJLE" color="code">danger.fail</code> - Request Changes on the PR.</li></ul></div></div><div class="Slide sc-bwzfXH jcCqmo" id="slide-14"><div class="sc-gipzik bgTkeX"><div><pre style="color:#ccc;background:#2d2d2d;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:#ccc;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#cc99cd">if</span> <span class="token" style="color:#ccc">(</span>filesNeedingTests<span class="token" style="color:#ccc">.</span>length<span class="token" style="color:#ccc">)</span> <span class="token" style="color:#ccc">{</span>
  <span class="token" style="color:#cc99cd">const</span> filesNeedingTestsOutput <span class="token" style="color:#67cdcc">=</span> filesNeedingTests<span class="token" style="color:#ccc">.</span>
    <span class="token" style="color:#f08d49">map</span><span class="token" style="color:#ccc">(</span>f <span class="token" style="color:#67cdcc">=&gt;</span> <span class="token" style="color:#ccc">.</span><span class="token" style="color:#f08d49">map</span><span class="token" style="color:#ccc">(</span>f <span class="token" style="color:#67cdcc">=&gt;</span> <span class="token" style="color:#7ec699">&#x27;- `&#x27;</span> <span class="token" style="color:#67cdcc">+</span> f <span class="token" style="color:#67cdcc">+</span> <span class="token" style="color:#7ec699">&#x27;`&#x27;</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">)</span><span class="token" style="color:#ccc">.</span><span class="token" style="color:#f08d49">join</span><span class="token" style="color:#ccc">(</span><span class="token" style="color:#7ec699">&#x27;\n&#x27;</span><span class="token" style="color:#ccc">)</span>
  <span class="token" style="color:#cc99cd">const</span> output <span class="token" style="color:#67cdcc">=</span> <span class="token,template-string"><span class="token" style="color:#7ec699">`It looks like you&#x27;ve added some new files, but forgot the tests.
  
  Missing Test Files: 
  </span><span class="token,interpolation"><span class="token,interpolation-punctuation" style="color:#ccc">${</span>filesNeedingTestsOutput<span class="token,interpolation-punctuation" style="color:#ccc">}</span></span><span class="token" style="color:#7ec699">`</span></span>
  <span class="token" style="color:#f08d49">warn</span><span class="token" style="color:#ccc">(</span>output<span class="token" style="color:#ccc">)</span>
<span class="token" style="color:#ccc">}</span>
</code></pre></div></div></div><div class="Slide sc-bwzfXH jcCqmo" id="slide-15"><div><h1 class="sc-EHOje jvzENE sc-ifAKCX fQplfI" font-size="4" color="heading">Behold!</h1><img src="img/danger_tests.png"/></div></div><div class="Slide sc-bwzfXH jcCqmo" id="slide-16"><div><h1 class="sc-EHOje jvzENE sc-ifAKCX fQplfI" font-size="4" color="heading">New Rule: Preserve Reviewer Sanity</h1><p class="sc-cSHVUG bHfcLB" font-size="2">The Rule: Encourage developers to keep their PRs under 400 LoC.</p></div></div><div class="Slide sc-bwzfXH jcCqmo" id="slide-17"><div class="sc-gipzik bgTkeX"><div><pre style="color:#ccc;background:#2d2d2d;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code style="color:#ccc;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#cc99cd">const</span> <span class="token" style="color:#f8c555">LARGE_PR_LINES</span> <span class="token" style="color:#67cdcc">=</span> <span class="token" style="color:#f08d49">400</span>

<span class="token" style="color:#cc99cd">if</span> <span class="token" style="color:#ccc">(</span>danger<span class="token" style="color:#ccc">.</span>github<span class="token" style="color:#ccc">.</span>pr<span class="token" style="color:#ccc">.</span>additions <span class="token" style="color:#67cdcc">&gt;</span> <span class="token" style="color:#f8c555">LARGE_PR_LINES</span><span class="token" style="color:#ccc">)</span> <span class="token" style="color:#ccc">{</span>
  <span class="token" style="color:#f08d49">warn</span><span class="token" style="color:#ccc">(</span><span class="token" style="color:#7ec699">&#x27;This is a long PR. For the sanity of reviewers,&#x27;</span>
    <span class="token" style="color:#67cdcc">+</span> <span class="token" style="color:#7ec699">&#x27;please limit PRs to be less than 400 LoC&#x27;</span><span class="token" style="color:#ccc">)</span>
<span class="token" style="color:#ccc">}</span> 
</code></pre></div></div></div><div class="Slide sc-bwzfXH jcCqmo" id="slide-18"><div><h1 class="sc-EHOje jvzENE sc-ifAKCX fQplfI" font-size="4" color="heading">Behold!</h1><img src="img/danger_large_pr.png"/></div></div><div class="Slide sc-bwzfXH jcCqmo" id="slide-19"><div><h1 class="sc-EHOje jvzENE sc-ifAKCX fQplfI" font-size="4" color="heading">But does it work?</h1><p class="sc-cSHVUG bHfcLB" font-size="2">Graph showing the total number of unit tests in our front end code base:</p><div class="sc-bdVaJa cglYjX" src="img/total_test_count.png" width="100vw" height="100vh"></div></div></div><div class="Slide sc-bwzfXH jcCqmo" id="slide-20"><div><h1 class="sc-EHOje jvzENE sc-ifAKCX fQplfI" font-size="4" color="heading">And More...</h1><ul class="sc-kAzzGY kKaDaD" font-size="2"><li class="sc-kgoBCf kVSTZj">Report ESLint Failures</li><li class="sc-kgoBCf kVSTZj">Report Stylelint Failures</li><li class="sc-kgoBCf kVSTZj">Commit fixable linter changes</li><li class="sc-kgoBCf kVSTZj">Report Unit Test Failures</li><li class="sc-kgoBCf kVSTZj">...</li></ul></div></div><div class="Slide sc-bwzfXH jcCqmo" id="slide-21"><div><h1 class="sc-EHOje jvzENE sc-ifAKCX fQplfI" font-size="4" color="heading">Wait..I thought this was a React Meetup!</h1><ul class="sc-kAzzGY kKaDaD" font-size="2"><li class="sc-kgoBCf kVSTZj">Ensure that components have Storybooks</li><li class="sc-kgoBCf kVSTZj">Ensure components have READMEs</li><li class="sc-kgoBCf kVSTZj">The Sky is the limit...</li></ul></div></div><div class="Slide sc-bwzfXH jcCqmo" id="slide-22"><div><h1 class="sc-EHOje jvzENE sc-ifAKCX fQplfI" font-size="4" color="heading">Any Questions?</h1></div></div><div class="Slide sc-bwzfXH jcCqmo" id="slide-23"><div><h1 class="sc-EHOje jvzENE sc-ifAKCX fQplfI" font-size="4" color="heading">Interested in building better tooling?</h1><p class="sc-cSHVUG bHfcLB" font-size="2">We&#x27;re hiring!</p></div></div></div></div></div></div><div class="sc-kkGfuU cvWkuU"><div class="sc-hMqMXs bLlTBZ"><button class="sc-kEYyzF kuCICn" title="go to: 0" color="text"></button><button class="sc-kEYyzF kxZWNW" title="go to: 1" color="text"></button><button class="sc-kEYyzF kxZWNW" title="go to: 2" color="text"></button><button class="sc-kEYyzF kxZWNW" title="go to: 3" color="text"></button><button class="sc-kEYyzF kxZWNW" title="go to: 4" color="text"></button><button class="sc-kEYyzF kxZWNW" title="go to: 5" color="text"></button><button class="sc-kEYyzF kxZWNW" title="go to: 6" color="text"></button><button class="sc-kEYyzF kxZWNW" title="go to: 7" color="text"></button><button class="sc-kEYyzF kxZWNW" title="go to: 8" color="text"></button><button class="sc-kEYyzF kxZWNW" title="go to: 9" color="text"></button><button class="sc-kEYyzF kxZWNW" title="go to: 10" color="text"></button><button class="sc-kEYyzF kxZWNW" title="go to: 11" color="text"></button><button class="sc-kEYyzF kxZWNW" title="go to: 12" color="text"></button><button class="sc-kEYyzF kxZWNW" title="go to: 13" color="text"></button><button class="sc-kEYyzF kxZWNW" title="go to: 14" color="text"></button><button class="sc-kEYyzF kxZWNW" title="go to: 15" color="text"></button><button class="sc-kEYyzF kxZWNW" title="go to: 16" color="text"></button><button class="sc-kEYyzF kxZWNW" title="go to: 17" color="text"></button><button class="sc-kEYyzF kxZWNW" title="go to: 18" color="text"></button><button class="sc-kEYyzF kxZWNW" title="go to: 19" color="text"></button><button class="sc-kEYyzF kxZWNW" title="go to: 20" color="text"></button><button class="sc-kEYyzF kxZWNW" title="go to: 21" color="text"></button><button class="sc-kEYyzF kxZWNW" title="go to: 22" color="text"></button><button class="sc-kEYyzF kxZWNW" title="go to: 23" color="text"></button></div></div><div class="sc-hSdWYo buYgEA sc-iAyFgw cEEdtW" role="button" title="Previous Slide"></div><div class="sc-eHgmQL jcmuyS sc-iAyFgw cEEdtW" role="button" title="Next Slide"></div></div>
<script src="main.js"></script>
</body>
</html>
